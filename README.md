# routing_protocols_exploits
routing protocols attacks

## OSPF

### 攻击流程

1. 向受害者路由器发送错误报文1
2. 向目标路由器发送注入恶意路由的报文2
3. 触发受害者路由器反击
4. 目标路由器丢弃反击，并发送LSA ack
5. 目标路由器泛洪收到的含有恶意路由的报文
6. 这时受害者路由器也会收到这个报文，但是由于和之前发送的反击报文有相同的***，所以被丢弃。

### 关于修改exp的说明

1. 网络配置的问题，原exp没arp没办法发出去包，被交换机丢了，所以手动指定了victim_mac
2. 原exp有个问题就是默认你输入的路由器ip地址作为该路由器的router-id，如果有需要注意修改一下

### 踩过的坑

1. gns3 vm有bug，各种抓包抓不到，各种无响应，最终全挪到本地实现的。
2. 实体真机如果连接到gns3，最好用本地环回口，或者以太网口，设置额外的ip地址及网段用于联通，网关最好也设置一个，不设置网关不会发送arp，ip报文也就没办法发送。

### 拓扑图

### 配置

cisco ios下载
https://blog.51cto.com/9843231/1930568?cid=707194

Ospf v3配置
https://www.cnblogs.com/jin311599/p/10934212.html

Ip配置
```
configure terminal 
interface e0/0
ip add 172.16.22.4 255.255.255.0
no shutdown
exit
```

Ospf配置
```
router ospf 1
router-id 0.0.0.1
network 172.16.22.0 0.0.0.255 area 0
```

查看ospf信息
```
show ip ospf neighbor
show ip ospf database
```

查看路由表
`show ip route`

保存配置（很重要不然重启全没了，默认配置运行在nvram里）
`copy run start`

ubuntu给loop网卡设置地址
`sudo ip addr add 172.16.22.66/24 dev lo`


